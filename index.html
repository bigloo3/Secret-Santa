<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Secret Santa Picker</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    #result { margin-top: 20px; font-size: 1.2em; font-weight: bold; }
  </style>
</head>
<body>
  <h2>Select Your Name</h2>
  <select id="nameSelect">
    <option value="">-- choose --</option>
    <option>Luiso</option>
    <option>Kevin</option>
    <option>Jose</option>
    <option>Jack</option>
    <option>Betim</option>
    <option>Misael</option>
    <option>Ronaldo</option>
    <option>Bogoni</option>
    <option>Andy</option>
    <option>Junior</option>
  </select>
  <button onclick="reveal()">Reveal My Match</button>
  <div id="result"></div>

  <script>
    const participants = ["Luiso","Kevin","Jose","Jack","Betim","Misael","Ronaldo","Bogoni","Andy","Junior"];
    const lastYear = {
      "Luiso": "Kevin",
      "Kevin": "Bogoni",
      "Misael": "Jose",
      "Jose": "Luiso",
      "Jack": "Betim",
      "Betim": "Misael",
      "Ronaldo": "Jack",
      "Bogoni": "Ronaldo"
    };

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function generateAssignments() {
      let givers = participants.slice();
      let receivers = participants.slice();
      let assignments = {};

      // Force Misael -> Andy
      assignments["Misael"] = "Andy";
      givers = givers.filter(x => x !== "Misael");
      receivers = receivers.filter(x => x !== "Andy");

      let valid = false;
      while (!valid) {
        let shuffled = shuffle(receivers.slice());
        valid = true;
        assignments = {"Misael": "Andy"};
        for (let i = 0; i < givers.length; i++) {
          const giver = givers[i];
          let receiver = shuffled[i];
          if (giver === receiver || (lastYear[giver] && lastYear[giver] === receiver)) {
            valid = false;
            break;
          }
          assignments[giver] = receiver;
        }
      }
      return assignments;
    }

    const assignments = generateAssignments();

    function reveal() {
      const name = document.getElementById('nameSelect').value;
      if (!name) return;
      document.getElementById('result').textContent = "You got: " + assignments[name];
    }
  </script>
</body>
</html>